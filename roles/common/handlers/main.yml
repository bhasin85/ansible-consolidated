
  - name: reboot
    command: /sbin/reboot

  - name: reload-sysctl
    command: /sbin/sysctl -p /etc/sysctl.conf

  - name: restart-br0
    command: sh -c "/sbin/ifdown br0 && /sbin/ifup br0"

  - name: restart-eth0
    command: sh -c "/sbin/ifdown eth0 && /sbin/ifup eth0"

  - name: restart-eth1
    command: sh -c "/sbin/ifdown eth1 && /sbin/ifup eth1"

  - name: restart-eth2
    command: sh -c "/sbin/ifdown eth2 && /sbin/ifup eth2"

  - name: restart-wlan0
    command: sh -c "/sbin/ifdown wlan0 && sleep 1 && /sbin/ifup wlan0"

  - name: restart-dnsmasq
    service: name=dnsmasq state=restarted

  - name: restart-hostapd
    service: name=hostapd state=restarted

  - name: reconfigure-tzdata
    command: "{{item}}"
    with_items:
      # note that dpkg-reconfigure will actually modify /etc/timezone which is nasty
      - dpkg-reconfigure --frontend noninteractive tzdata

  - name: reconfigure-iptables
    command: "{{item}}"
    with_items:
      # incoming http to allow apt-get update/upgrade
      - sh /etc/iptables-rules
      - dpkg-reconfigure --frontend noninteractive iptables-persistent

  - name: restart-smcroute
    service: name=smcroute state=restarted

  - name: restart-postgres
    service: name=postgresql state=restarted

  - name: restart-tomcat7
    service: name=tomcat7 state=restarted


